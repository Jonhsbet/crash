<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo Crash - JonhsBet</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* (Estilos inalterados, mesmos do c贸digo anterior) */
    </style>
</head>
<body>
    <div class="container">
        <div class="controls">
            <a href="URL_DA_HOME_DO_SITE">
                <img src="https://simp6.jpg5.su/images3/Jonhsbet-1e4378a890b0154ee.png" alt="Jonhsbet" style="width: 100px; cursor: pointer;">
            </a>
            <div class="balance" id="balance">Saldo: R$1000,00</div>
            <input type="number" id="betAmount" placeholder="Valor da aposta" min="1">
            <input type="number" id="autoWithdraw" placeholder="Retirada autom谩tica (Ex: 2x)" min="1">
            <button id="placeBet" onclick="placeBet()">Fazer Aposta</button>
            <button id="cashOut" onclick="cashOut()" disabled>Retirar</button>
            <p id="result"></p>
        </div>
        <div class="game-area">
            <div id="multiplierBox" class="multiplier-box">1.00x</div>
            <div class="progress-container">
                <div class="timer-label" id="timerLabel">10</div>
                <div id="progressBar" class="progress-bar"></div>
            </div>
            <canvas id="crashChart"></canvas>
        </div>
    </div>

    <script>
        let multiplier = 1;
        let gameInterval;
        let betAmount = 0;
        let cashedOut = false;
        let balance = 1000; // Saldo inicial
        let crashValue; // Valor de crash
        let autoWithdraw = null; // Valor de retirada autom谩tica
        let gameStarted = false;
        let countdownInterval; // Vari谩vel para o cron么metro de contagem regressiva
        let countdownTime = 10; // Tempo inicial para o cron么metro

        const ctx = document.getElementById('crashChart').getContext('2d');
        const crashChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Multiplicador',
                    data: [],
                    borderColor: '#00ff00',
                    backgroundColor: 'rgba(0, 255, 0, 0.1)',
                    fill: true,
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { display: false },
                    y: { display: false }
                },
                plugins: {
                    legend: { display: false }
                },
                elements: {
                    point: {
                        radius: 5,
                        backgroundColor: 'rgba(255, 255, 255, 0)',
                        borderWidth: 0
                    }
                }
            }
        });

        function updateBalanceDisplay() {
            document.getElementById("balance").textContent = `Saldo: R$${balance.toFixed(2)}`;
        }

        function placeBet() {
            const inputAmount = parseFloat(document.getElementById("betAmount").value);
            autoWithdraw = parseFloat(document.getElementById("autoWithdraw").value) || null;

            if (inputAmount && inputAmount > 0 && inputAmount <= balance && !gameStarted) {
                betAmount = inputAmount;
                balance -= betAmount;
                cashedOut = false;
                document.getElementById("placeBet").disabled = true;
                document.getElementById("placeBet").classList.add('disabled');
                document.getElementById("cashOut").disabled = false;
                document.getElementById("result").textContent = "";
                updateBalanceDisplay();
            } 
        }

        function startGame() {
            gameStarted = true;
            multiplier = 1;
            crashValue = generateCrashValue();
            countdownTime = 10;
            updateCountdown();

            // Inicia o cron么metro de contagem regressiva
            countdownInterval = setInterval(() => {
                countdownTime -= 1;
                updateCountdown();
                if (countdownTime <= 0) {
                    clearInterval(countdownInterval);
                }
            }, 1000);

            document.getElementById("multiplierBox").style.display = 'block';
            document.getElementById("multiplierBox").textContent = `${multiplier.toFixed(2)}x`;

            crashChart.data.labels = [];
            crashChart.data.datasets[0].data = [];
            crashChart.update();

            gameInterval = setInterval(() => {
                multiplier += Math.random() * 0.2;
                crashChart.data.labels.push((crashChart.data.labels.length + 1).toString());
                crashChart.data.datasets[0].data.push(multiplier.toFixed(2));
                crashChart.update();

                document.getElementById("multiplierBox").textContent = `${multiplier.toFixed(2)}x `;

                if (autoWithdraw && multiplier >= autoWithdraw && !cashedOut) {
                    cashOut();
                }

                if (multiplier >= crashValue) {
                    clearInterval(gameInterval);
                    document.getElementById("result").textContent = `Crashed em ${multiplier.toFixed(2)}x`;
                    document.getElementById("placeBet").disabled = false;
                    document.getElementById("placeBet").classList.remove('disabled');
                    document.getElementById("multiplierBox").style.display = 'none';
                    gameStarted = false;
                }
            }, 1000);
        }

        function cashOut() {
            if (!cashedOut && gameStarted) {
                const profit = betAmount * multiplier;
                balance += profit;
                cashedOut = true;
                document.getElementById("result").textContent = `Voc锚 retirou em ${multiplier.toFixed(2)}x e ganhou R$${profit.toFixed(2)}`;
                document.getElementById("cashOut").disabled = true;
                updateBalanceDisplay();
            }
        }

        function generateCrashValue() {
            const random = Math.random();
            if (random < 0.5) return 2 + Math.random() * 2;
            else if (random < 0.8) return 3 + Math.random() * 2;
            else return 5 + Math.random() * 5;
        }

        function updateCountdown() {
            document.getElementById("timerLabel").textContent = countdownTime;
            document.getElementById("progressBar").style.width = `${(countdownTime / 10) * 100}%`;
        }

        document.addEventListener("DOMContentLoaded", () => {
            updateBalanceDisplay();
            setInterval(() => {
                if (!gameStarted) startGame();
            }, 5000); // Inicia um novo jogo a cada 5 segundos
        });
    </script>
</body>
</html>
